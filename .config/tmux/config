
# Theme {{{1
%if #{==:#{TERM},linux}
set -g status-fg colour7
set -g status-bg colour0

set -g window-status-format "#I:#W#F"
set -g window-status-current-style fg=colour15,bold
set -g window-status-activity fg=colour1
set -g window-status-separator ' '

set -g message-command-style bg=colour0,fg=colour15
set -g message-style bg=colour0,fg=colour15
set -g mode-style bg=colour15,fg=colour0

set -g pane-border-style bg=colour0,fg=colour7
set -g pane-active-border-style bg=colour0,fg=colour15

set -g display-panes-colour colour7
set -g display-panes-active-colour colour15

set -g clock-mode-colour colour7
%else
source-file ~/.config/tmux/theme.conf
%endif

set -g clock-mode-style 24
# 1}}}

set -g history-limit 20000

set -g display-time 0
set -g repeat-time 418

set -g status-keys emacs

# Allow commands immediately following send-prefix.
set -s escape-time 0

set -g focus-events on

set -g prefix 'C-t'

bind C-t last-window
bind t last-pane

bind -r C-h resize-pane -L

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

bind -r H resize-pane -L 5
bind -r J resize-pane -D 3
bind -r K resize-pane -U 3
bind -r L resize-pane -R 5

bind c new-window -c "#{pane_current_path}"
bind C-m new-window -c "#{pane_current_path}"

set-hook -g after-split-window[1] "select-layout tiled"
set-hook -g window-layout-changed[2] 'set -wF pane-border-status "#{?#{==:#{window_panes},1},off,bottom}"'

bind P set -w window-status-format " #I:#T " \; set -w window-status-current-format "#[bold] #I:#T "

bind S display-panes -d 0 "swap-pane -t '%%'"

bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# put useful info in the status bar
set -g set-titles on
set -g set-titles-string '#H:#S.#I.#P #W #T' # window number,program name, active(or not)

# enable 256 colors mode - important if you want the solarized theme look
# semi-decent in vim
set -g default-terminal "$TERM"
# Disable login shells.
set -g default-command "$SHELL"

# resize windows on larger screens - if off the size is capped to the smallest
# screen size that has ever looked at it
setw -g aggressive-resize on

bind r source-file ~/.tmux.conf

bind b set -g status

set -g visual-bell on
set -g bell-action other

bind -r > swap-window -t +1
bind -r < swap-window -t -1

bind-key C-u copy-mode \; send-keys -X page-up

bind-key -T copy-mode-vi Escape send-keys -X cancel

bind / copy-mode \; send-key ?

bind v copy-mode
bind V capture-pane -S - \; split-window -vZ "tmux show-buffer | sed 's/\\s*$//' | nvim +normal!G{}k"

set -g copy-mode-match-style bg=#fdef39
set -g copy-mode-current-match-style bg=#fdef39

# Cursor shape.
set -ga terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'
# set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'

# Enable RGB color.
set-option -ga terminal-overrides ",*:Tc"

bind '~' setw synchronize-panes \; display "synchronize-panes: #{?pane_synchronized,yes,no}"
bind 'a' set monitor-activity \; display "monitor-activity: #{?monitor-activity,yes,no}"

# vim: ft=tmux fdm=marker
