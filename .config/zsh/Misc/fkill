#autoload

emulate -L zsh

setopt pipe_fail

local pid
local args=()
(( EUID )) && args+=(-u $EUID)
ps $args -o pid,pcpu,state,time,command |
awk 'NR<2 { print; next } { print | "sort -rgk2" }' |
fzf -m --header-lines=1 -q "'" |
awk '{ print $1 }' |
xargs -r kill -${1:-9}
